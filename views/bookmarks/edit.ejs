<h1>Edit Bookmark</h1>

<form action="/bookmarks/<%= bookmark._id %>/edit" method="POST" novalidate>
  <div class="mb-3">
    <label for="url" class="form-label">URL</label>
    <input
      type="url"
      class="form-control"
      id="url"
      name="url"
      value="<%= bookmark.url %>"
      required
      placeholder="https://example.com"
    />
  </div>

  <div class="mb-3">
    <label for="title" class="form-label">Title</label>
    <input
      type="text"
      class="form-control"
      id="title"
      name="title"
      value="<%= bookmark.title %>"
      required
      placeholder="Bookmark title"
    />
  </div>

  <div class="mb-3">
    <label for="description" class="form-label">Description</label>
    <textarea
      class="form-control"
      id="description"
      name="description"
      rows="3"
      placeholder="Add a description"
    >
<%= bookmark.description || "" %></textarea
    >
  </div>

  <div class="mb-3">
    <label for="faviconUrl" class="form-label">Favicon URL</label>
    <input type="url" class="form-control" id="faviconUrl" name="faviconUrl"
    value="<%= bookmark.faviconUrl || "" %>"
    placeholder="https://example.com/favicon.ico" />
  </div>

  <div class="mb-3">
    <label for="tags" class="form-label">Tags (comma separated)</label>
    <input
      type="text"
      class="form-control"
      id="tags"
      name="tags"
      value="<%= bookmark.tags ? bookmark.tags.join(', ') : '' %>"
      placeholder="tag1, tag2, tag3"
    />
  </div>

  <div class="mb-3">
    <label class="form-label">Collections</label>

    <% if (collections.length === 0) { %>
    <p class="text-muted">You have no collections yet.</p>
    <% } else { %>
    <div class="border rounded p-3">
      <% collections.forEach(function(collection) { %>
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="collections"
        value="<%= collection._id %>" id="collection-<%= collection._id %>" <%=
        bookmark.collections.some(c => c._id.toString() ===
        collection._id.toString() ) ? 'checked' : '' %> />
        <label class="form-check-label" for="collection-<%= collection._id %>">
          <%= collection.name %>
        </label>
      </div>
      <% }) %>
    </div>
    <% } %>
  </div>

  <button type="submit" class="btn btn-primary">Save Changes</button>
  <a href="/bookmarks/<%= bookmark._id %>" class="btn btn-secondary ms-2"
    >Cancel</a
  >
</form>
